name: Functional Tests

on: [push]

jobs:
  test:
    strategy:
      fail-fast: false
      matrix:
        api-level: [25] #Google api level for example [25,23,28] 
        target: [default]
        steps:
        - uses: actions/checkout@v3 #checkout the code 
        - name: Set up JDK 1.8
          uses: actions/setup-java@v3
          with:
            java-version: 11
        - name: Install and Run Appium Server
          run: |
            chmod +x ./scripts/RunAppiumServer.sh # install and run appium server in the background
            ./scripts/RunAppiumServer.sh
        - name: Run Appium Tests
          uses: reactivecircus/android-emulator-runner@v1 # install and create the Emulator
          with:
            api-level: ${{ matrix.api-level }}
            target: ${{ matrix.target }}
            arch: x86_64
            profile: Nexus 6
            script: ./gradlew test --info # running our test with info to check the results
        
